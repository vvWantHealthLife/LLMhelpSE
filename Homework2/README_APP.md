# 水印文件本地应用

一个功能强大的本地水印应用程序，支持为图片添加文本水印和图片水印，并提供丰富的自定义选项。

## 功能特点

### 1. 文件处理

#### 1.1 导入图片
- 支持单张图片拖拽或通过文件选择器导入
- 支持批量导入，可一次性选择多张图片或直接导入整个文件夹
- 在界面上显示已导入图片的列表（缩略图和文件名）

#### 1.2 支持格式
- 输入格式：支持主流格式，如 JPEG, PNG, BMP, TIFF
- PNG格式支持透明通道
- 输出格式：用户可选择输出为 JPEG 或 PNG

#### 1.3 导出图片
- 用户可指定一个输出文件夹，默认禁止导出到原文件夹
- 提供导出文件命名规则选项：
  - 保留原文件名
  - 添加自定义前缀（如 wm_）
  - 添加自定义后缀（如 _watermarked）
- 对于 JPEG 格式，提供图片质量（压缩率）调节滑块（0-100）

### 2. 水印类型

#### 2.1 文本水印
- 内容：用户可自定义输入任意文本
- 字体：可选择系统已安装的字体、字号、粗体、斜体
- 颜色：提供调色板让用户选择字体颜色
- 透明度：可调节文本的透明度（0-100%）
- 样式：可添加阴影或描边效果，以增强在复杂背景下的可读性

#### 2.2 图片水印
- 用户可从本地选择一张图片（如Logo）作为水印
- 支持带透明通道的 PNG 图片
- 缩放：可按比例或自由调整图片水印的大小
- 透明度：可调节图片水印的整体透明度（0-100%）

### 3. 水印布局与样式

#### 3.1 实时预览
- 所有对水印的调整都在主预览窗口中实时显示效果
- 用户可以点击图片列表切换预览不同的图片

#### 3.2 位置
- 预设位置：提供九宫格布局（四角、正中心），用户可一键将水印放置在这些位置
- 手动拖拽：用户可以直接在预览图上通过鼠标拖拽水印到任意位置

#### 3.3 旋转
- 提供滑块，允许用户以任意角度旋转水印

### 4. 配置管理

#### 4.1 水印模板
- 用户可以将当前的水印设置保存为一个模板
- 用户可以加载、管理和删除已保存的模板
- 程序启动时自动加载上一次关闭时的设置或一个默认模板

## 安装与运行

### 依赖项

本应用程序需要以下依赖项：

```
Python 3.6+
PyQt5
Pillow (PIL)
```

### 安装依赖

```bash
pip install PyQt5 Pillow
```

### 运行应用程序

```bash
python watermark_app.py
```

## 使用说明

### 导入图片
1. 点击"导入图片"按钮选择单张或多张图片
2. 点击"导入文件夹"按钮导入整个文件夹中的图片
3. 导入的图片将显示在左侧的图片列表中

### 添加水印
1. 选择"文本水印"或"图片水印"选项卡
2. 对于文本水印：
   - 输入水印文本
   - 选择字体、大小、颜色和样式
   - 调整透明度
3. 对于图片水印：
   - 点击"选择水印图片"按钮选择一张图片
   - 调整大小和透明度

### 调整水印位置
1. 使用九宫格按钮选择预设位置
2. 或直接在预览图上拖拽水印到任意位置
3. 使用旋转滑块调整水印角度

### 导出图片
1. 选择输出格式（JPEG或PNG）
2. 对于JPEG格式，调整质量滑块
3. 选择文件命名规则
4. 点击"导出图片"按钮
5. 选择输出目录

### 保存和加载模板
1. 输入模板名称
2. 点击"保存当前设置为模板"按钮
3. 点击"加载模板"按钮选择已保存的模板

## 项目结构

```
Homework2/
├── watermark_app.py       # 主应用程序
├── watermark_image.py     # 图像处理类
├── watermark_preview.py   # 预览控件类
├── watermark_settings.py  # 设置类
├── watermark_templates.py # 模板管理类
└── templates/             # 保存的模板目录
```

## 注意事项

- 为避免覆盖原图片，默认不允许导出到原图片所在目录
- 程序会自动保存您的设置，下次启动时会自动加载
- 对于大量图片的批处理，建议使用较小的水印以提高处理速度




具体的可以直接运行的程序，您可以下dist文件夹下找到，名字是“watermarkApp”
